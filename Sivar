--=====================================================================2=======--
-- Dong Hub - Complete Version with Grab Aimlock
--============================================================================--

-- ì„œë¹„ìŠ¤ ë¡œë“œ
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local UserInput = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TeleportService = game:GetService("TeleportService")
local TweenService = game:GetService("TweenService")
local Debris = game:GetService("Debris")
local VirtualUser = game:GetService("VirtualUser")
local CoreGui = game:GetService("CoreGui")
local GuiService = game:GetService("GuiService")
local Stats = game:GetService("Stats")
local NetworkClient = game:GetService("NetworkClient")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ë¡œì»¬ í”Œë ˆì´ì–´
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local WalkSpeed = 16
local SpeedConnection = nil

local JumpPower = 50

local FlyEnabled = false
local FlySpeed = 50
local FlyConnection = nil
local BodyVelocity = nil
local BodyGyro = nil

local FreezeEnabled = false
local FreezePosition = nil
local FreezeConnection = nil

local InfiniteJumpEnabled = false
local JumpConnection = nil

local NoclipEnabled = false
local NoclipConnection = nil

local SelectedPlayer = nil
local IsTeleporting = false
local LastTeleportTime = 0
local TeleportCooldown = 0.5

--============================================================================--
-- ê·¸ë©(Grab) ì—ì„í•µ ë³€ìˆ˜
--============================================================================--
local GrabAimEnabled = false
local GrabAimConnection = nil
local GrabAimKeybind = Enum.KeyCode.T  -- ê¸°ë³¸ í‚¤: T
local GrabAimTarget = nil

--============================================================================--
-- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
--============================================================================--
local function WaitForCharacter()
    repeat 
        task.wait()
    until LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    return LocalPlayer.Character
end

local function SafeCall(func, ...)
    local success, result = pcall(func, ...)
    return result
end

--============================================================================--
-- ê·¸ë© ì—ì„í•µ ê´€ë ¨ í•¨ìˆ˜
--============================================================================--

-- ê°€ì¥ ê°€ê¹Œìš´ í”Œë ˆì´ì–´ ì°¾ëŠ” í•¨ìˆ˜
local function GetClosestPlayer()
    local closestPlayer = nil
    local closestDistance = math.huge
    
    local myCharacter = LocalPlayer.Character
    if not myCharacter or not myCharacter:FindFirstChild("HumanoidRootPart") then
        return nil
    end
    
    local myPosition = myCharacter.HumanoidRootPart.Position
    
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local character = player.Character
            if character and character:FindFirstChild("HumanoidRootPart") then
                local targetPart = character:FindFirstChild("HumanoidRootPart")
                if targetPart then
                    local distance = (myPosition - targetPart.Position).Magnitude
                    if distance < closestDistance then
                        closestDistance = distance
                        closestPlayer = player
                    end
                end
            end
        end
    end
    
    return closestPlayer
end

--============================================================================--
-- PCLD (ì•„ì´ì½˜ ESP) ê´€ë ¨
--============================================================================--
local PCLDEnabled = false
local PCLDMarkers = {}
local PCLDConnection = nil

function CreateIDMarker(targetPlayer)
    if not (targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart")) then
        return nil
    end

    local marker = Instance.new("Part")
    marker.Size = Vector3.new(1, 1, 1)
    marker.Transparency = 1
    marker.Anchored = true
    marker.CanCollide = false
    marker.Parent = workspace

    local billboard = Instance.new("BillboardGui")
    billboard.Size = UDim2.new(0, 160, 0, 60)
    billboard.StudsOffset = Vector3.new(0, 3, 0)
    billboard.AlwaysOnTop = true
    billboard.Parent = marker

    local background = Instance.new("Frame")
    background.Size = UDim2.new(1, 0, 1, 0)
    background.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    background.BackgroundTransparency = 0.2
    background.BorderSizePixel = 2
    background.BorderColor3 = Color3.fromRGB(255, 100, 100)
    background.Parent = billboard

    local idLabel = Instance.new("TextLabel")
    idLabel.Size = UDim2.new(1, 0, 0.5, 0)
    idLabel.Position = UDim2.new(0, 0, 0, 0)
    idLabel.BackgroundTransparency = 1
    idLabel.Text = "ğŸ†” " .. targetPlayer.UserId
    idLabel.TextColor3 = Color3.fromRGB(255, 200, 200)
    idLabel.TextStrokeTransparency = 0.3
    idLabel.TextStrokeColor3 = Color3.fromRGB(255, 0, 0)
    idLabel.Font = Enum.Font.GothamBold
    idLabel.TextSize = 16
    idLabel.Parent = background

    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, 0, 0.5, 0)
    nameLabel.Position = UDim2.new(0, 0, 0.5, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = "ğŸ“Œ " .. targetPlayer.Name
    nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    nameLabel.TextStrokeTransparency = 0
    nameLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
    nameLabel.Font = Enum.Font.Gotham
    nameLabel.TextSize = 12
    nameLabel.Parent = background

    return marker
end

--============================================================================--
-- í”Œë ˆì´ì–´ ê´€ë ¨ í•¨ìˆ˜
--============================================================================--
local function GetPlayerList()
    local list = {}
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(list, player.Name)
        end
    end
    return list
end

local function GetPlayerStatus(player)
    if not player then return "âŒ ì—†ìŒ" end
    if not player.Character then return "ğŸ”„ ë¡œë”©" end
    if not player.Character:FindFirstChild("HumanoidRootPart") then return "ğŸ’€ ì‚¬ë§" end
    if player.Character:FindFirstChildOfClass("Humanoid").Health <= 0 then return "ğŸ’€ ì‚¬ë§" end
    return "âœ… ì •ìƒ"
end

mouse = game.Players.LocalPlayer:GetMouse()
function tpF()
    plr = game.Players.LocalPlayer
    char = plr.Character
    if not char then return end

    hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    hum = char:FindFirstChild("Humanoid")
    ragdolled = hum:FindFirstChild("Ragdolled")

    target = mouse.Target
    if not target then return end

    currentCFrame = hrp.CFrame
    currentRotation = CFrame.new(Vector3.zero, currentCFrame.LookVector)

    mouseHit = mouse.Hit
    targetPos = mouseHit.Position + Vector3.new(0, 5, 0)
    newCFrame = CFrame.new(targetPos) * currentRotation

    if ragdolled.Value == true then
        char:PivotTo(newCFrame)
    else
        hrp.CFrame = newCFrame
    end
end

local function GetDistanceToPlayer(player)
    if not (player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and
            LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")) then
        return nil
    end
    return (LocalPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
end

local function GetAccountAge()
    local age = LocalPlayer.AccountAge
    local days = math.floor(age)
    local years = math.floor(days / 365)
    local months = math.floor((days % 365) / 30)
    return string.format("%dì¼ (%dë…„ %dê°œì›”)", days, years, months)
end

local function GetFriendCount()
    local success, pages = pcall(function()
        return LocalPlayer:GetFriendsAsync()
    end)

    if not success or not pages then
        return "ì•Œ ìˆ˜ ì—†ìŒ"
    end

    local count = 0

    repeat
        local currentPage = pages:GetCurrentPage()
        count += #currentPage

        if not pages.IsFinished then
            pages:AdvanceToNextPageAsync()
        end
    until pages.IsFinished

    return tostring(count)
end

function AntiGrabF()
    rs = game:GetService("ReplicatedStorage")
    plr = game.Players.LocalPlayer
    inv = workspace:WaitForChild(plr.Name.."SpawnedInToys")
    Struggle = rs.CharacterEvents.Struggle
    Ragdoll = rs.CharacterEvents.RagdollRemote
    while AntiGrabT do
        task.wait()
        char = plr.Character
        hrp = char:FindFirstChild("HumanoidRootPart")
        hum = char:FindFirstChild("Humanoid")
        if plr.IsHeld.Value then
            Struggle:FireServer()
            Ragdoll:FireServer(hrp, 0)
            hum.Sit = false
        end
    end
end

--============================================================================--
-- ìœˆë„ìš° ìƒì„±
--============================================================================--
local Window = Rayfield:CreateWindow({
    Name = "Dong Hub",
    LoadingTitle = "Dong Hub ë¡œë”© ì¤‘...",
    LoadingSubtitle = "v3.0 - ê·¸ë© ì—ì„í•µ í¬í•¨",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = "DongHub",
        FileName = "Config"
    },
    ToggleUIKeybind = "K",
    KeySystem = false,
})

-- í™˜ì˜ ë©”ì‹œì§€
Rayfield:Notify({
    Title = "âœ¨ Dong Hub ì‹¤í–‰ë¨",
    Content = "Kí‚¤ë¥¼ ëˆŒëŸ¬ UIë¥¼ í† ê¸€í•˜ì„¸ìš”",
    Duration = 3,
})

--============================================================================--
-- ì •ë³´ íƒ­
--============================================================================--
local MainTab = Window:CreateTab("ì •ë³´", nil)

MainTab:CreateSection("ì„œë²„ ì •ë³´")

local ServerInfoLabel = MainTab:CreateLabel("ì„œë²„ ID: " .. game.JobId)
local PingLabel = MainTab:CreateLabel("")
local MemoryLabel = MainTab:CreateLabel("")
local PlayerCountLabel = MainTab:CreateLabel("í”Œë ˆì´ì–´: " .. #Players:GetPlayers() .. " ëª…")

RunService.Heartbeat:Connect(function()
    local ping = math.floor(Stats.Network.ServerStatsItem["Data Ping"]:GetValue())
    PingLabel:Set("í•‘: " .. ping .. "ms")
end)

RunService.Heartbeat:Connect(function()
    local mem = math.floor(collectgarbage("count"))
    MemoryLabel:Set("ë©”ëª¨ë¦¬: " .. mem .. "KB")
end)

Players.PlayerAdded:Connect(function()
    PlayerCountLabel:Set("í”Œë ˆì´ì–´: " .. #Players:GetPlayers() .. " ëª…")
end)

Players.PlayerRemoving:Connect(function()
    PlayerCountLabel:Set("í”Œë ˆì´ì–´: " .. #Players:GetPlayers() .. " ëª…")
end)

MainTab:CreateSection("ê³„ì • ì •ë³´")

local AccountInfoLabel = MainTab:CreateLabel("ê³„ì • ì´ë¦„: " .. LocalPlayer.Name .. " [ " .. LocalPlayer.DisplayName ..  " ]")
local UserIdLabel = MainTab:CreateLabel("ê³„ì • ID: " .. LocalPlayer.UserId)
local AccountAgeLabel = MainTab:CreateLabel("ê³„ì • ë‚˜ì´: " .. GetAccountAge())
local FriendCountLabel = MainTab:CreateLabel("ê³„ì • ì¸ë§¥: " .. GetFriendCount())

local SecuritySection = MainTab:CreateSection("ìºë¦­í„° ìƒíƒœ")

local AntiGrabInfoLabel = MainTab:CreateLabel("ì¡í˜€ìˆìŒ: ")

RunService.Heartbeat:Connect(function()
    if LocalPlayer and LocalPlayer:FindFirstChild("IsHeld") then
        isHeld = LocalPlayer.IsHeld.Value
        if isHeld then
            AntiGrabInfoLabel:Set("ì¡í˜€ìˆìŒ: âœ…")
        else
            AntiGrabInfoLabel:Set("ì¡í˜€ìˆìŒ: âŒ")
        end
    end
end)

local SpeedLabel = MainTab:CreateLabel("")
local JumpLabel = MainTab:CreateLabel("")
local GravityLabel = MainTab:CreateLabel("")
local FlyStatusLabel = MainTab:CreateLabel("í”Œë¼ì´ ìƒíƒœ: êº¼ì§")

RunService.Heartbeat:Connect(function()
    if LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then SpeedLabel:Set("ì†ë„: " .. math.floor(humanoid.WalkSpeed)) end
    end
end)

RunService.Heartbeat:Connect(function()
    if LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then JumpLabel:Set("ì í”„ë ¥: " .. math.floor(humanoid.JumpPower)) end
    end
end)

RunService.Heartbeat:Connect(function()
    GravityLabel:Set("ì¤‘ë ¥: " .. math.floor(workspace.Gravity))
end)

RunService.Heartbeat:Connect(function()
    FlyStatusLabel:Set("í”Œë¼ì´ ìƒíƒœ: " .. (FlyEnabled and ("ì¼œì§ ( ì†ë„: " .. FlySpeed .. ")") or "êº¼ì§"))
end)

--============================================================================--
-- ë¡œì»¬ íƒ­
--============================================================================--
local LocalTab = Window:CreateTab("ë¡œì»¬", nil)

LocalTab:CreateSlider({
    Name = "ì†ë„ ì„¤ì •",
    Range = {0, 500},
    Increment = 1,
    Suffix = "WalkSpeed",
    CurrentValue = 16,
    Flag = "SpeedSlider",
    Callback = function(value)
        WalkSpeed = value
        if LocalPlayer.Character then
            local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = value
            end
        end
    end,
})

LocalTab:CreateSlider({
    Name = "ì í”„ë ¥ ì„¤ì •",
    Range = {0, 500},
    Increment = 1,
    Suffix = "JumpPower",
    CurrentValue = 50,
    Flag = "JumpSlider",
    Callback = function(value)
        JumpPower = value
        if LocalPlayer.Character then
            local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                humanoid.JumpPower = value
            end
        end
    end,
})

LocalTab:CreateSlider({
    Name = "ì¤‘ë ¥ ì„¤ì •",
    Range = {0, 500},
    Increment = 1,
    Suffix = "Gravity",
    CurrentValue = 196.2,
    Flag = "GravitySlider",
    Callback = function(value)
        workspace.Gravity = value
    end,
})

LocalTab:CreateSlider({
    Name = "í”Œë¼ì´ ì†ë„ ",
    Range = {1, 500},
    Increment = 1,
    Suffix = "FlySpeed",
    CurrentValue = 50,
    Flag = "FlySpeedSlider",
    Callback = function(value)
        FlySpeed = value
        if BodyVelocity then
            BodyVelocity.MaxForce = Vector3.new(value * 1000, value * 1000, value * 1000)
        end
    end,
})

LocalTab:CreateToggle({
    Name = "í”Œë¼ì´",
    CurrentValue = false,
    Flag = "FlyToggle",
    Callback = function(state)
        FlyEnabled = state

        if FlyEnabled then
            local character = LocalPlayer.Character or WaitForCharacter()
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart")

            if not (rootPart and humanoid) then
                Rayfield:Notify({ Title = "ì˜¤ë¥˜", Content = "ìºë¦­í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ", Duration = 2 })
                return
            end

            if BodyVelocity then BodyVelocity:Destroy() end
            if BodyGyro then BodyGyro:Destroy() end

            BodyVelocity = Instance.new("BodyVelocity")
            BodyVelocity.Velocity = Vector3.new()
            BodyVelocity.MaxForce = Vector3.new(FlySpeed * 1000, FlySpeed * 1000, FlySpeed * 1000)
            BodyVelocity.P = 10000
            BodyVelocity.Parent = rootPart

            BodyGyro = Instance.new("BodyGyro")
            BodyGyro.MaxTorque = Vector3.new(40000, 40000, 40000)
            BodyGyro.P = 10000
            BodyGyro.CFrame = rootPart.CFrame
            BodyGyro.Parent = rootPart
            
            humanoid.PlatformStand = true

            FlyConnection = RunService.Heartbeat:Connect(function()
                if not (FlyEnabled and LocalPlayer.Character and rootPart and BodyVelocity) then
                    return
                end
                
                local moveDir = Vector3.new()
                local camera = workspace.CurrentCamera
                
                if UserInput:IsKeyDown(Enum.KeyCode.W) then
                    moveDir = moveDir + camera.CFrame.LookVector
                end
                if UserInput:IsKeyDown(Enum.KeyCode.S) then
                    moveDir = moveDir - camera.CFrame.LookVector
                end
                if UserInput:IsKeyDown(Enum.KeyCode.A) then
                    moveDir = moveDir - camera.CFrame.RightVector
                end
                if UserInput:IsKeyDown(Enum.KeyCode.D) then
                    moveDir = moveDir + camera.CFrame.RightVector
                end
                if UserInput:IsKeyDown(Enum.KeyCode.Space) then
                    moveDir = moveDir + Vector3.new(0, 1, 0)
                end
                if UserInput:IsKeyDown(Enum.KeyCode.LeftControl) then
                    moveDir = moveDir + Vector3.new(0, -1, 0)
                end

                if moveDir.Magnitude > 0 then
                    moveDir = moveDir.Unit * FlySpeed
                end
                
                BodyVelocity.Velocity = moveDir
                BodyGyro.CFrame = camera.CFrame
            end)
            
            Rayfield:Notify({
                Title = "í”Œë¼ì´",
                Content = "WASD: ì´ë™ | ìŠ¤í˜ì´ìŠ¤: ìƒìŠ¹ | Ctrl: í•˜ê°•",
                Duration = 7
            })

        else
            if FlyConnection then
                FlyConnection:Disconnect()
                FlyConnection = nil
            end

            if BodyVelocity then
                BodyVelocity:Destroy()
                BodyVelocity = nil
            end

            if BodyGyro then
                BodyGyro:Destroy()
                BodyGyro = nil
            end

            if LocalPlayer.Character then
                local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.PlatformStand = false
                end
            end
            Rayfield:Notify({Title = "í”Œë¼ì´", Content = "êº¼ì§", Duration = 0.5})
        end
    end,
})

LocalTab:CreateToggle({
    Name = "í”„ë¦¬ì¦ˆ",
    CurrentValue = false,
    Flag = "FreezeToggle",
    Callback = function(state)
        FreezeEnabled = state

        if FreezeEnabled then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                FreezePosition = LocalPlayer.Character.HumanoidRootPart.CFrame

                FreezeConnection = RunService.Heartbeat:Connect(function()
                    if FreezeEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                        LocalPlayer.Character.HumanoidRootPart.CFrame = FreezePosition

                        local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                        if humanoid then
                            humanoid.PlatformStand = true
                        end
                    end
                end)

                Rayfield:Notify({ Title = "í”„ë¦¬ì¦ˆ", Content = "ì¼œì§", Duration = 2 })
            else
                Rayfield:Notify({ Title = "ì˜¤ë¥˜", Content = "ìºë¦­í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ", Duration = 2 })
                FreezeEnabled = false
            end
        else
            if FreezeConnection then
                FreezeConnection:Disconnect()
                FreezeConnection = nil
            end

            if LocalPlayer.Character then
                local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.PlatformStand = false
                end
            end

            Rayfield:Notify({Title = "í”„ë¦¬ì¦ˆ", Content = "êº¼ì§", Duration = 0.5})
        end
    end,
})

LocalTab:CreateToggle({
    Name = "ë¬´í•œ ì í”„",
    CurrentValue = false,
    Flag = "InfiniteJump",
    Callback = function(state)
        InfiniteJumpEnabled = state
        
        if InfiniteJumpEnabled then
            JumpConnection = UserInput.JumpRequest:Connect(function()
                if LocalPlayer.Character then
                    local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                    end
                end
            end)
            Rayfield:Notify({ Title = "ë¬´í•œ ì í”„", Content = "ì¼œì§", Duration = 2 })
        else
            if JumpConnection then
                JumpConnection:Disconnect()
                JumpConnection = nil
            end
            Rayfield:Notify({ Title = "ë¬´í•œ ì í”„", Content = "êº¼ì§", Duration = 2 })
        end
    end,
})

LocalTab:CreateToggle({
    Name = "ë…¸í´ë¦½",
    CurrentValue = false,
    Flag = "Noclip",
    Callback = function(state)
        NoclipEnabled = state
        
        if NoclipEnabled then
            NoclipConnection = RunService.Stepped:Connect(function()
                if LocalPlayer.Character then
                    for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
            end)
            Rayfield:Notify({ Title = "ë²½ëš«ê¸°", Content = "ì¼œì§", Duration = 2 })
        else
            if NoclipConnection then
                NoclipConnection:Disconnect()
                NoclipConnection = nil
            end
            Rayfield:Notify({ Title = "ë²½ëš«ê¸°", Content = "êº¼ì§", Duration = 2 })
        end
    end,
})

LocalTab:CreateToggle({
    Name = "ì•„ì´ì½˜ ESP",
    CurrentValue = false,
    Flag = "PCLD",
    Callback = function(state)
        PCLDEnabled = state

        if PCLDEnabled then
            for _, marker in pairs(PCLDMarkers) do
                SafeCall(marker.Destroy, marker)
            end
            PCLDMarkers = {}

            for _, player in ipairs(Players:GetPlayers()) do
                if player ~= LocalPlayer then
                    local marker = CreateIDMarker(player)
                    if marker then
                        PCLDMarkers[player] = marker
                    end
                end
            end

            PCLDConnection = RunService.Heartbeat:Connect(function()
                if not PCLDEnabled then return end

                for player, marker in pairs(PCLDMarkers) do
                    SafeCall(function()
                        if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            marker.CFrame = player.Character.HumanoidRootPart.CFrame
                        else
                            marker:Destroy()
                            PCLDMarkers[player] = nil
                        end
                    end)
                end

                for _, player in ipairs(Players:GetPlayers()) do
                    if player ~= LocalPlayer and not PCLDMarkers[player] then
                        local marker = CreateIDMarker(player)
                        if marker then
                            PCLDMarkers[player] = marker
                        end
                    end
                end
            end)

            Rayfield:Notify({ Title = "ì•„ì´ì½˜ ESP", Content = "ì¼œì§", Duration = 2 })
        else
            if PCLDConnection then
                PCLDConnection:Disconnect()
                PCLDConnection = nil
            end

            for _, marker in pairs(PCLDMarkers) do
                SafeCall(marker.Destroy, marker)
            end
            PCLDMarkers = {}

            Rayfield:Notify({ Title = "ì•„ì´ì½˜ ESP", Content = "êº¼ì§", Duration = 2 })
        end
    end,
})

--============================================================================--
-- í…”ë ˆí¬íŠ¸ íƒ­
--============================================================================--
local TeleportTab = Window:CreateTab("í…”ë ˆí¬íŠ¸", nil)

local PlayerDropdown = TeleportTab:CreateDropdown({
    Name = "í”Œë ˆì´ì–´ ì„ íƒ",
    Options = GetPlayerList(),
    CurrentOption = {"ì„ íƒí•˜ì„¸ìš”"},
    MultipleOptions = false,
    Flag = "PlayerSelect",
    Callback = function(selected)
        if selected and #selected > 0 then
            local selectedName = selected[1]
            for _, player in ipairs(Players:GetPlayers()) do
                if player.Name == selectedName then
                    SelectedPlayer = player
                    local status = GetPlayerStatus(player)
                    local dist = GetDistanceToPlayer(player)
                    local distText = dist and string.format(" (%.1f studs)", dist) or ""
                    Rayfield:Notify({
                        Title = "âœ… í”Œë ˆì´ì–´ ì„ íƒë¨",
                        Content = string.format("%s | ìƒíƒœ: %s%s", player.Name, status, distText),
                        Duration = 3
                    })
                    break
                end
            end
        end
    end,
})

TeleportTab:CreateButton({
    Name = "ëª©ë¡ ìƒˆë¡œê³ ì¹¨",
    Callback = function()
        local newList = GetPlayerList()
        PlayerDropdown:Set(newList)

        if SelectedPlayer then
            local stillExists = false
            for _, p in ipairs(Players:GetPlayers()) do
                if p == SelectedPlayer then
                    stillExists = true
                    break
                end
            end

            if not stillExists then
                SelectedPlayer = nil
                Rayfield:Notify({ Title = "ì•Œë¦¼", Content = "ì´ì „ ì„ íƒì´ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤", Duration = 2 })
            end
        end

        Rayfield:Notify({Title = "ì™„ë£Œ", Content = "í”Œë ˆì´ì–´ " .. #newList .. "ëª…", Duration = 2})
    end,
})

local PlayerInfoLabel = TeleportTab:CreateLabel("íƒ€ê²Ÿ: nil")
local DistanceLabel = TeleportTab:CreateLabel("ê±°ë¦¬: nil")

RunService.Heartbeat:Connect(function()
    if SelectedPlayer then
        local status = GetPlayerStatus(SelectedPlayer)
        local dist = GetDistanceToPlayer(SelectedPlayer)
        local distText = dist and string.format("%.1f studs", dist) or "nil"
        PlayerInfoLabel:Set(string.format("íƒ€ê²Ÿ: %s [%s]", SelectedPlayer.Name, status))
        DistanceLabel:Set(string.format("ê±°ë¦¬: %s", distText))
    else
        PlayerInfoLabel:Set("íƒ€ê²Ÿ: nil")
        DistanceLabel:Set("ê±°ë¦¬: nil")
    end
end)

TeleportTab:CreateButton({
    Name = "í…”ë ˆí¬íŠ¸",
    Callback = function()
        if not SelectedPlayer or not SelectedPlayer.Character or not SelectedPlayer.Character:FindFirstChild("HumanoidRootPart") then
            return Rayfield:Notify({ Title = "ì˜¤ë¥˜", Content = "ëŒ€ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŒ", Duration = 2 })
        end

        if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            return Rayfield:Notify({ Title = "ì˜¤ë¥˜", Content = "ë‚´ ìºë¦­í„° ì—†ìŒ", Duration = 2 })
        end

        if LocalPlayer.Character:FindFirstChild("Humanoid").Health == 0 then
            return Rayfield:Notify({ Title = "ì˜¤ë¥˜", Content = "ë‚´ ìºë¦­í„° ì£½ìŒ", Duration = 2 })
        end

        LocalPlayer.Character.HumanoidRootPart.CFrame = SelectedPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, 5, 0)
        Rayfield:Notify({ Title = "ì™„ë£Œ", Content = SelectedPlayer.Name .. "ì—ê²Œ ì´ë™í•¨", Duration = 2 })
    end,
})

local GeneralSection = TeleportTab:CreateSection("ìœ„ì¹˜ ì´ë™")

TeleportTab:CreateButton({
    Name = "ìŠ¤í° êµ¬ì—­",
    Callback = function()
        SafeCall(function()
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(0,-7,0)
                Rayfield:Notify({ Title = "ì´ë™", Content = "ìŠ¤í° ì§€ì—­", Duration = 2 })
            end
        end)
    end
})

TeleportTab:CreateInput({
   Name = "ë†’ì´ ì„¤ì •",
   CurrentValue = "",
   PlaceholderText = "...",
   RemoveTextAfterFocusLost = false,
   Flag = "Input1",
   Callback = function(Text)
      local num = tonumber(Text)
      if num then
         Value = num
      else
         Value = nil
      end
   end,
})

TeleportTab:CreateButton({
   Name = "í…”ë ˆí¬íŠ¸",
   Callback = function()
      if not Value then return end
      local pos = LocalPlayer.Character.HumanoidRootPart.Position
      LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos.X, Value, pos.Z)
   end,
})

--============================================================================--
-- ê·¸ ì™¸ íƒ­
--============================================================================--
local MiscTab = Window:CreateTab("ê·¸ ì™¸", nil)

MiscTab:CreateButton({
    Name = "ì„¸ì…˜ ì²´í¬",
    Callback = function()
        local issues = {}
        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer then
                if string.match(player.Name:lower(), "admin") or 
                   string.match(player.Name:lower(), "mod") or
                   string.match(player.Name:lower(), "owner") then
                    table.insert(issues, "âš ï¸ ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì´ë¦„: " .. player.Name)
                end

                if player.UserId < 1000000 then
                    table.insert(issues, "ğŸ”´ ì˜¬ë“œ ìœ ì €: " .. player.Name .. " (ID: " .. player.UserId .. ")")
                end
            end
        end

        if #issues > 0 then
            for _, issue in ipairs(issues) do
                Rayfield:Notify({ Title = "ê²½ê³ ", Content = issue, Duration = 3 })
            end
        else
            Rayfield:Notify({ Title = "ì„¸ì…˜ ì²´í¬", Content = "íŠ¹ì´ì‚¬í•­ ì—†ìŒ", Duration = 2 })
        end
    end
})

MiscTab:CreateButton({
    Name = "âŒ UI ì™„ì „ ì¢…ë£Œ",
    Callback = function()
        Rayfield:Destroy()
    end,
})

MiscTab:CreateButton({
    Name = "ì„œë²„ ë‚˜ê°€ê¸°",
    Callback = function()
        LocalPlayer:Kick("ë‚˜ê°€ê¸°")
    end
})

MiscTab:CreateButton({
    Name = "ì„œë²„ ì¬ì ‘ì†",
    Callback = function()
        TeleportService:Teleport(game.PlaceId, LocalPlayer)
    end,
})

MiscTab:CreateButton({
    Name = "ìºë¦­í„° ë¦¬ì…‹ (ì£½ì´ê¸°)",
    Callback = function()
        SafeCall(function()
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.Health = 0
            end
        end)
    end
})

MiscTab:CreateButton({
    Name = "FPS ë¶€ìŠ¤íŠ¸",
    Callback = function()
        SafeCall(function()
            settings().Rendering.QualityLevel = 1
            RunService:Set3dRenderingEnabled(false)
            task.wait(0.1)
            RunService:Set3dRenderingEnabled(true)
            Rayfield:Notify({ Title = "FPS", Content = "ë¶€ìŠ¤íŠ¸ ì ìš©ë¨", Duration = 2 })
        end)
    end
})

MiscTab:CreateKeybind({
    Name = "ì—ì„ í…”ë ˆí¬íŠ¸",
    CurrentKeybind = "",
    HoldToInteract = false,
    Flag = "38",
    Callback = tpF
})

--============================================================================--
-- ë³´ì•ˆ íƒ­
--============================================================================--
local SecurityTab = Window:CreateTab("ë³´ì•ˆ", 4483362458)

local AntiAfkEnabled = false
local AntiAfkConnection = nil

SecurityTab:CreateToggle({
    Name = "Anti-AFK (ìë¦¬ë¹„ì›€ ë°©ì§€)",
    CurrentValue = false,
    Flag = "AntiAfk",
    Callback = function(state)
        AntiAfkEnabled = state

        if AntiAfkEnabled then
            LocalPlayer.Idled:Connect(function()
                VirtualUser:CaptureController()
                VirtualUser:ClickButton2(Vector2.new())
            end)

            AntiAfkConnection = RunService.Stepped:Connect(function()
                if AntiAfkEnabled then
                    VirtualUser:CaptureController()
                    VirtualUser:ClickButton2(Vector2.new())
                end
            end)

            Rayfield:Notify({ Title = "Anti-AFK", Content = "í™œì„±í™”ë¨", Duration = 2 })
        else
            if AntiAfkConnection then
                AntiAfkConnection:Disconnect()
                AntiAfkConnection = nil
            end
            Rayfield:Notify({ Title = "Anti-AFK", Content = "ë¹„í™œì„±í™”ë¨", Duration = 2 })
        end
    end,
})

SecurityTab:CreateToggle({
    Name = "Anti-Grab (ì¡ê¸° ë°©ì§€)",
    CurrentValue = false,
    Flag = "AntiGrab",
    Callback = function(state)
        AntiGrabT = state
        AntiGrabF()
    end
})

--============================================================================--
-- ê·¸ë©(Grab) íƒ­ - ì—ì„í•µ (ìƒˆë¡œ ì¶”ê°€ëœ ë¶€ë¶„)
--============================================================================--
local GrabTab = Window:CreateTab("ê·¸ë©", nil)

GrabTab:CreateSection("ğŸ¯ ì—ì„í•µ ì„¤ì •")
GrabTab:CreateParagraph({
    Title = "ì‚¬ìš© ë°©ë²•",
    Content = "ì—ì„í•µì„ ì¼œê³  T í‚¤ë¥¼ ëˆ„ë¥´ë©´ ê°€ì¥ ê°€ê¹Œìš´ í”Œë ˆì´ì–´ì—ê²Œ ì¦‰ì‹œ ì¡°ì¤€ë©ë‹ˆë‹¤."
})

-- ì—ì„í•µ í† ê¸€
GrabTab:CreateToggle({
    Name = "ì—ì„í•µ",
    CurrentValue = false,
    Flag = "GrabAimToggle",
    Callback = function(state)
        GrabAimEnabled = state

        if GrabAimEnabled then
            -- ì—ì„í•µ ì¼œì§
            if GrabAimConnection then
                GrabAimConnection:Disconnect()
            end
            
            -- í‚¤ ì…ë ¥ ê°ì§€
            GrabAimConnection = UserInput.InputBegan:Connect(function(input, gameProcessed)
                if gameProcessed then return end
                if not GrabAimEnabled then return end
                
                if input.KeyCode == GrabAimKeybind then
                    -- T í‚¤ë¥¼ ëˆ„ë¥´ë©´ ê°€ì¥ ê°€ê¹Œìš´ í”Œë ˆì´ì–´ì—ê²Œ ì¦‰ì‹œ ì¡°ì¤€
                    local targetPlayer = GetClosestPlayer()
                    
                    if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
                        local camera = workspace.CurrentCamera
                        local targetPart = targetPlayer.Character.HumanoidRootPart
                        
                        -- 0.001ì´ˆ ë§Œì— ì‹œì„  ì´ë™ (ì‚¬ì‹¤ìƒ ì¦‰ì‹œ)
                        camera.CFrame = CFrame.new(camera.CFrame.Position, targetPart.Position)
                        
                        -- ì•Œë¦¼
                        Rayfield:Notify({
                            Title = "ğŸ¯ ì¡°ì¤€ ì™„ë£Œ",
                            Content = targetPlayer.Name .. " (ëª¸í†µ)",
                            Duration = 0.5
                        })
                    else
                        Rayfield:Notify({
                            Title = "âŒ ì¡°ì¤€ ì‹¤íŒ¨",
                            Content = "ì£¼ë³€ì— í”Œë ˆì´ì–´ê°€ ì—†ìŒ",
                            Duration = 1
                        })
                    end
                end
            end)
            
            Rayfield:Notify({
                Title = "ğŸ¯ ê·¸ë© ì—ì„í•µ",
                Content = "í™œì„±í™”ë¨ (T í‚¤: ìˆ˜ë™ì¡°ì¤€)",
                Duration = 2
            })
        else
            -- ì—ì„í•µ êº¼ì§
            if GrabAimConnection then
                GrabAimConnection:Disconnect()
                GrabAimConnection = nil
            end
            
            Rayfield:Notify({
                Title = "ğŸ¯ ê·¸ë© ì—ì„í•µ",
                Content = "ë¹„í™œì„±í™”ë¨",
                Duration = 1
            })
        end
    end
})

-- í‚¤ë°”ì¸ë“œ ì„¤ì •
GrabTab:CreateKeybind({
    Name = "ì—ì„í•µ í‚¤ ë³€ê²½",
    CurrentKeybind = "T",
    HoldToInteract = false,
    Flag = "GrabAimKeybind",
    Callback = function(key)
        -- í‚¤ ë¬¸ìì—´ì„ Enum.KeyCodeë¡œ ë³€í™˜
        local keyMap = {
            ["T"] = Enum.KeyCode.T,
            ["Y"] = Enum.KeyCode.Y,
            ["U"] = Enum.KeyCode.U,
            ["F"] = Enum.KeyCode.F,
            ["G"] = Enum.KeyCode.G,
            ["H"] = Enum.KeyCode.H,
            ["J"] = Enum.KeyCode.J,
            ["K"] = Enum.KeyCode.K,
            ["L"] = Enum.KeyCode.L,
            ["X"] = Enum.KeyCode.X,
            ["C"] = Enum.KeyCode.C,
            ["V"] = Enum.KeyCode.V,
            ["B"] = Enum.KeyCode.B,
            ["N"] = Enum.KeyCode.N,
            ["M"] = Enum.KeyCode.M,
        }
        
        if keyMap[key] then
            GrabAimKeybind = keyMap[key]
            Rayfield:Notify({
                Title = "í‚¤ ë³€ê²½ë¨",
                Content = "ì—ì„í•µ í‚¤: " .. key,
                Duration = 1.5
            })
        else
            Rayfield:Notify({
                Title = "ì§€ì›í•˜ì§€ ì•ŠëŠ” í‚¤",
                Content = "ì•ŒíŒŒë²³ í‚¤ë§Œ ì‚¬ìš© ê°€ëŠ¥ (T, F, G ë“±)",
                Duration = 2
            })
        end
    end
})

GrabTab:CreateButton({
    Name = "í…ŒìŠ¤íŠ¸ ì¡°ì¤€",
    Callback = function()
        local targetPlayer = GetClosestPlayer()
        if targetPlayer then
            Rayfield:Notify({
                Title = "ê°€ì¥ ê°€ê¹Œìš´ í”Œë ˆì´ì–´",
                Content = targetPlayer.Name .. " (ê±°ë¦¬: " .. math.floor(GetDistanceToPlayer(targetPlayer) or 0) .. ")",
                Duration = 2
            })
        else
            Rayfield:Notify({
                Title = "í”Œë ˆì´ì–´ ì—†ìŒ",
                Content = "ì£¼ë³€ì— í”Œë ˆì´ì–´ê°€ ì—†ìŠµë‹ˆë‹¤",
                Duration = 1
            })
        end
    end
})

--============================================================================--
-- ë§ˆë¬´ë¦¬
--============================================================================--
Rayfield:Notify({
    Title = "âœ¨ Dong Hub ë¡œë“œ ì™„ë£Œ",
    Content = "ê·¸ë© ì—ì„í•µì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! (T í‚¤)",
    Duration = 3
})
