--[[
    âš ï¸ ê²½ê³ : êµìœ¡ ëª©ì ìœ¼ë¡œë§Œ ì œê³µë©ë‹ˆë‹¤.
    Roblox ì´ìš©ì•½ê´€ì„ ìœ„ë°˜í•˜ë©° ê³„ì • ì œì¬ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤.
]]

-- Rayfield UI ë¡œë“œ (ì•ˆì •ì ì¸ ë²„ì „)
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()

-- Dong Hub ì°½ ìƒì„±
local Window = Rayfield:CreateWindow({
    Name = "ğŸ‰ Dong Hub v2.0",
    LoadingTitle = "Dong Hub ë¡œë”©ì¤‘...",
    LoadingSubtitle = "Z í…”ë ˆí¬íŠ¸ | ë²½ëš«ê¸° | ë³´í˜¸",
    ConfigurationSaving = {
        Enabled = false
    },
    KeySystem = false,
    KeySettings = {
        Title = "Dong Hub",
        Subtitle = "í‚¤ ì‹œìŠ¤í…œ",
        Note = "í‚¤ê°€ ì—†ìœ¼ë©´ Discord ë¬¸ì˜",
        FileName = "DongHubKey",
        SaveKey = false,
        GrabKeyFromSite = false,
        Key = {"DongHub2024"}
    },
    ToggleUIKeybind = "K"
})

-- íƒ­ ìƒì„±
local MainTab = Window:CreateTab("ë©”ì¸", "home")
local ProtectTab = Window:CreateTab("ë³´í˜¸", "shield")

-------------------------------------------------------------
-- [ì „ì—­ ë³€ìˆ˜]
-------------------------------------------------------------
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local userInputService = game:GetService("UserInputService")
local runService = game:GetService("RunService")
local tweenService = game:GetService("TweenService")

-- ìƒíƒœ ë³€ìˆ˜
local isGrabbed = false
local isPaused = false
local grabTimer = 0
local antiGrabEnabled = false
local zTeleportEnabled = false
local noclipEnabled = false
local noclipConnection = nil
local teleportCooldown = false

-- ìºë¦­í„° ë¡œë“œ ëŒ€ê¸°
repeat wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")

-------------------------------------------------------------
-- [ë©”ì¸ íƒ­ - Z í…”ë ˆí¬íŠ¸]
-------------------------------------------------------------
local TeleportSection = MainTab:CreateSection("ğŸŒ€ Z í…”ë ˆí¬íŠ¸")

-- ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì˜ 3D ì¢Œí‘œ ì–»ê¸° (ê°œì„ ë¨)
local function getMouseTarget()
    local unitRay = mouse.UnitRay
    local origin = unitRay.Origin
    local direction = unitRay.Direction * 1000
    
    -- íŒŒë¼ë¯¸í„° ì„¤ì •
    local params = RaycastParams.new()
    params.FilterType = Enum.RaycastFilterType.Blacklist
    params.FilterDescendantsInstances = {player.Character, workspace:FindFirstChild("Camera")}
    
    -- ë ˆì´ìºìŠ¤íŠ¸ ì‹¤í–‰
    local result = workspace:Raycast(origin, direction, params)
    
    if result then
        -- ë²½ì´ë‚˜ ë°”ë‹¥ì— ë‹¿ìœ¼ë©´ ê·¸ ìœ„ì¹˜ë¡œ
        return result.Position + result.Normal * 2
    else
        -- ì•„ë¬´ê²ƒë„ ì—†ìœ¼ë©´ ì¹´ë©”ë¼ê°€ ë°”ë¼ë³´ëŠ” ë°©í–¥ìœ¼ë¡œ 50ìŠ¤í„°ë“œ ì•
        return origin + direction.Unit * 50
    end
end

-- ì•ˆì „í•œ í…”ë ˆí¬íŠ¸ í•¨ìˆ˜
local function safeTeleport(position)
    if not player.Character then return false end
    
    local hrp = player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end
    
    -- í…”ë ˆí¬íŠ¸ ì „ ì¶©ëŒ ì„ì‹œ ë¹„í™œì„±í™”
    local originalCollision = {}
    for _, part in ipairs(player.Character:GetDescendants()) do
        if part:IsA("BasePart") then
            originalCollision[part] = part.CanCollide
            part.CanCollide = false
        end
    end
    
    -- í…”ë ˆí¬íŠ¸
    hrp.CFrame = CFrame.new(position)
    
    -- ì•½ê°„ì˜ ì§€ì—° í›„ ì¶©ëŒ ë³µêµ¬
    task.wait(0.1)
    for part, canCollide in pairs(originalCollision) do
        if part and part.Parent then
            part.CanCollide = canCollide
        end
    end
    
    return true
end

-- Zí‚¤ ì…ë ¥ ì²˜ë¦¬
userInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if not zTeleportEnabled or isPaused then return end
    if teleportCooldown then return end
    if not player.Character then return end
    
    if input.KeyCode == Enum.KeyCode.Z then
        teleportCooldown = true
        
        -- Zí‚¤ ëˆŒë €ì„ ë•Œ ìˆœê°„ì´ë™
        local targetPos = getMouseTarget()
        local success = safeTeleport(targetPos)
        
        if success then
            -- íš¨ê³¼
            local highlight = Instance.new("Highlight")
            highlight.Parent = player.Character
            highlight.Adornee = player.Character
            highlight.FillColor = Color3.fromRGB(0, 255, 255)
            highlight.FillTransparency = 0.5
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            
            game:GetService("Debris"):AddItem(highlight, 0.5)
        end
        
        -- 0.3ì´ˆ ì¿¨ë‹¤ìš´
        task.wait(0.3)
        teleportCooldown = false
    end
end)

-- Z í…”ë ˆí¬íŠ¸ í† ê¸€
MainTab:CreateToggle({
    Name = "ğŸŒ€ Z í…”ë ˆí¬íŠ¸",
    CurrentValue = false,
    Flag = "ZTeleportToggle",
    Callback = function(Value)
        zTeleportEnabled = Value
        
        if Value then
            Rayfield:Notify({
                Title = "âœ… Z í…”ë ˆí¬íŠ¸ ON",
                Content = "Z í‚¤ë¥¼ ëˆŒëŸ¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ë¡œ ìˆœê°„ì´ë™",
                Duration = 3
            })
        end
    end
})

-- í…”ë ˆí¬íŠ¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
MainTab:CreateButton({
    Name = "ğŸ¯ ì¦‰ì‹œ í…”ë ˆí¬íŠ¸",
    Callback = function()
        if isPaused then
            Rayfield:Notify({
                Title = "â›” ì¼ì‹œì •ì§€ ìƒíƒœ",
                Content = "ë³´í˜¸ ê¸°ëŠ¥ í•´ì œ ëŒ€ê¸° ì¤‘",
                Duration = 2
            })
            return
        end
        
        local targetPos = getMouseTarget()
        safeTeleport(targetPos)
    end
})

-------------------------------------------------------------
-- [ë©”ì¸ íƒ­ - ë²½ëš«ê¸° (Noclip)]
-------------------------------------------------------------
local NoclipSection = MainTab:CreateSection("ğŸ§± ë²½ëš«ê¸°")

-- ë²½ëš«ê¸° í•¨ìˆ˜ (ê°œì„ ë¨)
local function enableNoclip(enable)
    if enable then
        -- ê¸°ì¡´ ì—°ê²° ì œê±°
        if noclipConnection then
            noclipConnection:Disconnect()
        end
        
        -- Noclip ë£¨í”„
        noclipConnection = runService.Stepped:Connect(function()
            if not antiGrabEnabled and isPaused then return end
            if not player.Character then return end
            
            -- ë°”ë‹¥ì„ ì œì™¸í•œ ëª¨ë“  íŒŒíŠ¸ CanCollide = false
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                    -- HumanoidRootPartëŠ” ì•½ê°„ì˜ ì¶©ëŒ ìœ ì§€ (ì•ˆì •ì„±)
                    part.CanCollide = false
                end
            end
            
            -- HumanoidRootPartëŠ” ì•½ê°„ì˜ ì¶©ëŒ ìœ ì§€ (ì•ˆì •ì„±)
            local hrp = player.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CanCollide = true
            end
        end)
        
        Rayfield:Notify({
            Title = "âœ… ë²½ëš«ê¸° ON",
            Content = "ë²½/ì˜¤ë¸Œì íŠ¸ í†µê³¼ ê°€ëŠ¥ (ë°”ë‹¥ ì œì™¸)",
            Duration = 3
        })
    else
        -- Noclip ë¹„í™œì„±í™”
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        
        -- ì¶©ëŒ ë³µêµ¬
        if player.Character then
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
        
        Rayfield:Notify({
            Title = "â›” ë²½ëš«ê¸° OFF",
            Content = "ê¸°ëŠ¥ ë¹„í™œì„±í™”",
            Duration = 2
        })
    end
end

-- ë²½ëš«ê¸° í† ê¸€
MainTab:CreateToggle({
    Name = "ğŸ§± ë²½ëš«ê¸°",
    CurrentValue = false,
    Flag = "NoclipToggle",
    Callback = function(Value)
        noclipEnabled = Value
        enableNoclip(Value)
    end
})

-- ë²½ëš«ê¸° ì„¤ëª…
MainTab:CreateParagraph({
    Title = "ğŸ“Œ ë²½ëš«ê¸° ì •ë³´",
    Content = "â€¢ ë°”ë‹¥ ì œì™¸ ëª¨ë“  ë²½/ì˜¤ë¸Œì íŠ¸ í†µê³¼\nâ€¢ ë¨¸ë¦¬ ë¶€ë¶„ì€ ì•ˆì •ì„± ìœ ì§€\nâ€¢ ë³´í˜¸ ì¼ì‹œì •ì§€ ì¤‘ ë¹„í™œì„±í™”"
})

-------------------------------------------------------------
-- [ë³´í˜¸ íƒ­ - ì•ˆí‹°ê·¸ë© (5ì´ˆ ìë™ ì í”„)]
-------------------------------------------------------------
local AntiGrabSection = ProtectTab:CreateSection("ğŸ›¡ï¸ ì•ˆí‹°ê·¸ë©")

-- ì¡í˜ ê°ì§€ í•¨ìˆ˜ (ê°œì„ ë¨)
local function checkIfGrabbed()
    if not antiGrabEnabled or isPaused then return false end
    if not player.Character then return false end
    
    local character = player.Character
    
    -- Constraint ê°ì§€
    for _, constraint in ipairs(character:GetDescendants()) do
        if constraint:IsA("RopeConstraint") or constraint:IsA("SpringConstraint") or constraint:IsA("RodConstraint") then
            return true, constraint
        end
    end
    
    -- Weld ê°ì§€ (ë‹¤ë¥¸ í”Œë ˆì´ì–´ì™€ ì—°ê²°)
    for _, weld in ipairs(character:GetDescendants()) do
        if weld:IsA("Weld") or weld:IsA("Snap") or weld:IsA("Motor6D") then
            if weld.Part0 and weld.Part1 then
                local part0Parent = weld.Part0.Parent
                local part1Parent = weld.Part1.Parent
                
                if part0Parent and part1Parent and part0Parent ~= part1Parent then
                    if (part0Parent:IsA("Model") and part0Parent:FindFirstChild("Humanoid")) or
                       (part1Parent:IsA("Model") and part1Parent:FindFirstChild("Humanoid")) then
                        return true, weld
                    end
                end
            end
        end
    end
    
    -- BodyMover ê°ì§€
    for _, bodyMove in ipairs(character:GetDescendants()) do
        if bodyMove:IsA("BodyPosition") or bodyMove:IsA("BodyVelocity") then
            if bodyMove.Parent ~= character then
                return true, bodyMove
            end
        end
    end
    
    return false
end

-- ì¡í˜ í•´ì œ í•¨ìˆ˜ (ê°œì„ ë¨)
local function releaseFromGrab()
    if not player.Character then return end
    
    local character = player.Character
    
    -- Constraint ì œê±°
    for _, constraint in ipairs(character:GetDescendants()) do
        if constraint:IsA("Constraint") then
            pcall(function() constraint:Destroy() end)
        end
    end
    
    -- Weld/Joint ì œê±°
    for _, weld in ipairs(character:GetDescendants()) do
        if weld:IsA("Weld") or weld:IsA("Snap") or weld:IsA("Motor6D") then
            pcall(function() weld:Destroy() end)
        end
    end
    
    -- BodyMover ì œê±°
    for _, bodyMove in ipairs(character:GetDescendants()) do
        if bodyMove:IsA("BodyPosition") or bodyMove:IsA("BodyVelocity") then
            pcall(function() bodyMove:Destroy() end)
        end
    end
end

-- 5ì´ˆ ì í”„ ì‹œìŠ¤í…œ (ê°œì„ ë¨)
local function startJumpRelease()
    isGrabbed = true
    grabTimer = 5
    
    Rayfield:Notify({
        Title = "âš ï¸ ì¡í˜ ê°ì§€!",
        Content = "5ì´ˆ í›„ ìë™ ì í”„ ì‹œì‘",
        Duration = 3
    })
    
    -- 5ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´ ë° ì í”„
    for i = 5, 1, -1 do
        if not isGrabbed or not antiGrabEnabled then break end
        
        grabTimer = i
        
        -- ì í”„
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            local humanoid = player.Character.Humanoid
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            
            -- ìœ„ë¡œ í˜ ê°€í•˜ê¸°
            local hrp = player.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.Velocity = Vector3.new(hrp.Velocity.X, 50, hrp.Velocity.Z)
            end
        end
        
        task.wait(1)
    end
    
    -- 5ì´ˆ í›„ ê°•ì œ í•´ì œ
    if isGrabbed and antiGrabEnabled then
        releaseFromGrab()
        
        Rayfield:Notify({
            Title = "âœ… ê°•ì œ í•´ì œ",
            Content = "5ì´ˆ ì í”„ ì™„ë£Œ",
            Duration = 2
        })
        
        -- í•´ì œ í›„ ì¼ì‹œì •ì§€
        isPaused = true
        isGrabbed = false
        
        -- ë²½ëš«ê¸° ì¼ì‹œ ì¤‘ì§€
        if noclipEnabled then
            enableNoclip(false)
        end
        
        -- 5ì´ˆ ëŒ€ê¸°
        task.wait(5)
        isPaused = false
        
        -- ë²½ëš«ê¸° ì¬í™œì„±í™”
        if noclipEnabled then
            enableNoclip(true)
        end
        
        Rayfield:Notify({
            Title = "â–¶ï¸ ê¸°ëŠ¥ ì¬ê°œ",
            Content = "ëª¨ë“  ê¸°ëŠ¥ í™œì„±í™”",
            Duration = 2
        })
    end
end

-- ë©”ì¸ ê°ì§€ ë£¨í”„
local function startDetection()
    spawn(function()
        while antiGrabEnabled do
            task.wait(0.3)
            
            if isPaused then continue end
            
            local grabbed = checkIfGrabbed()
            
            if grabbed and not isGrabbed then
                startJumpRelease()
                
            elseif not grabbed and isGrabbed then
                isGrabbed = false
                
                Rayfield:Notify({
                    Title = "ğŸ”“ ì¡í˜ í•´ì œ",
                    Content = "5ì´ˆ í›„ ê¸°ëŠ¥ ì¬ê°œ",
                    Duration = 2
                })
                
                isPaused = true
                
                if noclipEnabled then
                    enableNoclip(false)
                end
                
                task.wait(5)
                isPaused = false
                
                if noclipEnabled then
                    enableNoclip(true)
                end
                
                Rayfield:Notify({
                    Title = "â–¶ï¸ ê¸°ëŠ¥ ì¬ê°œ",
                    Content = "ëª¨ë“  ê¸°ëŠ¥ í™œì„±í™”",
                    Duration = 2
                })
            end
        end
    end)
end

-- ì•ˆí‹°ê·¸ë© í† ê¸€
local antiGrabToggle = ProtectTab:CreateToggle({
    Name = "ğŸ›¡ï¸ ì•ˆí‹°ê·¸ë© (5ì´ˆ ì í”„)",
    CurrentValue = false,
    Flag = "AntiGrabToggle",
    Callback = function(Value)
        antiGrabEnabled = Value
        
        if Value then
            startDetection()
            Rayfield:Notify({
                Title = "âœ… ì•ˆí‹°ê·¸ë© ON",
                Content = "ì¡í˜ ê°ì§€ ë° 5ì´ˆ ì í”„",
                Duration = 3
            })
        else
            isGrabbed = false
            isPaused = false
            Rayfield:Notify({
                Title = "â›” ì•ˆí‹°ê·¸ë© OFF",
                Content = "ë³´í˜¸ ê¸°ëŠ¥ ë¹„í™œì„±í™”",
                Duration = 2
            })
        end
    end
})

-- ìˆ˜ë™ í•´ì œ ë²„íŠ¼
ProtectTab:CreateButton({
    Name = "ğŸ”“ ì¦‰ì‹œ í•´ì œ",
    Callback = function()
        releaseFromGrab()
        isGrabbed = false
        isPaused = true
        
        if noclipEnabled then
            enableNoclip(false)
        end
        
        Rayfield:Notify({
            Title = "âœ… ìˆ˜ë™ í•´ì œ",
            Content = "5ì´ˆ í›„ ê¸°ëŠ¥ ì¬ê°œ",
            Duration = 2
        })
        
        task.wait(5)
        isPaused = false
        
        if noclipEnabled then
            enableNoclip(true)
        end
    end
})

-- ë³´í˜¸ ìƒíƒœ í‘œì‹œ
ProtectTab:CreateParagraph({
    Title = "ğŸ“Š ë³´í˜¸ ìƒíƒœ",
    Content = "â€¢ ì•ˆí‹°ê·¸ë©: 5ì´ˆ ìë™ ì í”„\nâ€¢ ì¡í˜ í•´ì œ ì‹œ 5ì´ˆ ì¼ì‹œì •ì§€\nâ€¢ ë²½ëš«ê¸°ì™€ ì—°ë™"
})

-------------------------------------------------------------
-- [ë©”ì¸ íƒ­ - ë°˜ì§ì´ ì°¾ê¸°]
-------------------------------------------------------------
local ShinySection = MainTab:CreateSection("âœ¨ ë°˜ì§ì´ ì°¾ê¸°")

-- ë°˜ì§ì´ íƒì§€ í•¨ìˆ˜
local function findShinyObjects()
    local found = {}
    local count = 0
    
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Transparency < 0.5 then
            -- ë°˜ì§ì´ëŠ” ì¬ì§ˆ ì²´í¬
            local shinyMaterials = {
                [Enum.Material.Neon] = true,
                [Enum.Material.DiamondPlate] = true,
                [Enum.Material.Foil] = true,
                [Enum.Material.Glass] = true,
                [Enum.Material.Glacier] = true,
                [Enum.Material.Plastic] = true,
                [Enum.Material.SmoothPlastic] = true
            }
            
            if shinyMaterials[obj.Material] or obj.Reflectance > 0.2 then
                table.insert(found, obj)
                count = count + 1
                
                -- í•˜ì´ë¼ì´íŠ¸ (ë„ˆë¬´ ë§ìœ¼ë©´ ìƒëµ)
                if count < 20 then
                    local highlight = Instance.new("Highlight")
                    highlight.Parent = obj
                    highlight.Adornee = obj
                    highlight.FillColor = Color3.fromRGB(255, 255, 0)
                    highlight.FillTransparency = 0.5
                    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                    
                    game:GetService("Debris"):AddItem(highlight, 3)
                end
            end
        end
    end
    
    return found
end

MainTab:CreateButton({
    Name = "ğŸ” ë°˜ì§ì´ ìŠ¤ìº”",
    Callback = function()
        local results = findShinyObjects()
        Rayfield:Notify({
            Title = "ìŠ¤ìº” ì™„ë£Œ",
            Content = "ë°œê²¬ëœ ë°˜ì§ì´: " .. #results .. "ê°œ",
            Duration = 3
        })
    end
})

-- ì´ˆê¸° ì•Œë¦¼
task.wait(1)
Rayfield:Notify({
    Title = "ğŸ‰ Dong Hub ë¡œë“œ ì™„ë£Œ",
    Content = "K:UI í† ê¸€ | Z:í…”ë ˆí¬íŠ¸ | ë²½ëš«ê¸° | ì•ˆí‹°ê·¸ë©",
    Duration = 5
})
