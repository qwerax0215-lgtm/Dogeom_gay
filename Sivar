-- Rayfield 라이브러리 로드
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Window 생성 (yuri Hub) - 아홀로틀 테마
local Window = Rayfield:CreateWindow({
    Name = "yuri Hub",
    LoadingTitle = "yuri Hub",
    LoadingSubtitle = "by Rayfield",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "yuriHub",
        FileName = "Config"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = true
    },
    KeySystem = false
})

-- 아홀로틀 배경 설정 (귀여운 일러스트)
local player = game.Players.LocalPlayer
local gui = player:WaitForChild("PlayerGui")
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AxolotlBackground"
screenGui.Parent = gui
screenGui.IgnoreGuiInset = true

local background = Instance.new("ImageLabel")
background.Size = UDim2.new(1, 0, 1, 0)
background.Position = UDim2.new(0, 0, 0, 0)
background.BackgroundTransparency = 1
background.Image = "rbxassetid://10477522617" -- 귀여운 아홀로틀 일러스트
background.ImageColor3 = Color3.new(1, 0.9, 0.95) -- 연한 핑크색 틴트
background.ScaleType = Enum.ScaleType.Crop
background.Parent = screenGui

-- UI 색상 설정
Rayfield.Theme = {
    TextColor = Color3.new(1, 1, 1),
    BackgroundColor = Color3.new(1, 0.95, 0.98), -- 연한 핑크
    ForegroundColor = Color3.new(1, 1, 1), -- 하얀색
    RibbonColor = Color3.new(1, 0.9, 0.95),
    TabBackgroundColor = Color3.new(1, 0.95, 0.98),
    TabStrokeColor = Color3.new(1, 0.85, 0.9),
    ToggleEnabledColor = Color3.new(1, 0.8, 0.85),
    ToggleDisabledColor = Color3.new(0.9, 0.9, 0.9),
    SliderBackgroundColor = Color3.new(1, 1, 1),
    SliderProgressColor = Color3.new(1, 0.8, 0.85),
    DropdownBackgroundColor = Color3.new(1, 1, 1),
    InputBackgroundColor = Color3.new(1, 0.9, 0.95), -- 연한 핑크 입력창
    NotifyBackgroundColor = Color3.new(1, 0.95, 0.98)
}

-- 메인 탭 생성
local MainTab = Window:CreateTab("메인", "home")

---------------------------------------------------------------------------
-- 에임TP 관련
---------------------------------------------------------------------------
local aimTPEnabled = false

local function teleportToMouse()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return false end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return false end
    
    local mouse = player:GetMouse()
    if not mouse or not mouse.Hit then return false end
    
    rootPart.CFrame = CFrame.new(mouse.Hit.p)
    return true
end

game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Z and aimTPEnabled then
        if teleportToMouse() then
            Rayfield:Notify({Title="에임TP",Content="이동완료",Duration=1})
        end
    end
end)

---------------------------------------------------------------------------
-- 벽뚫 관련
---------------------------------------------------------------------------
local noclipEnabled = false
local noclipConnection = nil
local originalCanCollide = {}

local function toggleNoclip()
    local player = game.Players.LocalPlayer
    local character = player.Character
    
    if noclipEnabled then
        if noclipConnection then noclipConnection:Disconnect() end
        
        if character then
            for _, v in pairs(character:GetDescendants()) do
                if v:IsA("BasePart") then
                    originalCanCollide[v] = v.CanCollide
                end
            end
        end
        
        noclipConnection = game:GetService("RunService").Stepped:Connect(function()
            if noclipEnabled then
                local p = game.Players.LocalPlayer
                local c = p.Character
                if c then
                    for _, v in pairs(c:GetDescendants()) do
                        if v:IsA("BasePart") then v.CanCollide = false end
                    end
                end
            end
        end)
    else
        if noclipConnection then noclipConnection:Disconnect() noclipConnection = nil end
        
        local p = game.Players.LocalPlayer
        local c = p.Character
        if c then
            for _, v in pairs(c:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.CanCollide = (originalCanCollide[v] ~= nil) and originalCanCollide[v] or true
                end
            end
        end
        originalCanCollide = {}
    end
end

---------------------------------------------------------------------------
-- 플라이 관련
---------------------------------------------------------------------------
local flyEnabled = false
local flyBodyVelocity = nil
local flyConnection = nil
local flySpeed = 10

local function toggleFly()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoid or not rootPart then return end
    
    if flyEnabled then
        humanoid.PlatformStand = true
        
        if flyBodyVelocity then
            flyBodyVelocity:Destroy()
        end
        
        flyBodyVelocity = Instance.new("BodyVelocity")
        flyBodyVelocity.MaxForce = Vector3.new(1, 1, 1) * 1e9
        flyBodyVelocity.Velocity = Vector3.new(0, 0, 0)
        flyBodyVelocity.Parent = rootPart
        
        if flyConnection then
            flyConnection:Disconnect()
        end
        
        flyConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if not (flyEnabled and rootPart and rootPart.Parent and flyBodyVelocity) then return end
            
            local moveDirection = Vector3.new(0, 0, 0)
            local camera = workspace.CurrentCamera
            local uis = game:GetService("UserInputService")
            
            if uis:IsKeyDown(Enum.KeyCode.W) then
                moveDirection = moveDirection + camera.CFrame.LookVector
            end
            if uis:IsKeyDown(Enum.KeyCode.S) then
                moveDirection = moveDirection - camera.CFrame.LookVector
            end
            if uis:IsKeyDown(Enum.KeyCode.A) then
                moveDirection = moveDirection - camera.CFrame.RightVector
            end
            if uis:IsKeyDown(Enum.KeyCode.D) then
                moveDirection = moveDirection + camera.CFrame.RightVector
            end
            if uis:IsKeyDown(Enum.KeyCode.Space) then
                moveDirection = moveDirection + Vector3.new(0, 1, 0)
            end
            if uis:IsKeyDown(Enum.KeyCode.LeftControl) then
                moveDirection = moveDirection + Vector3.new(0, -1, 0)
            end
            
            if moveDirection.Magnitude > 0 then
                moveDirection = moveDirection.Unit * flySpeed
            end
            
            flyBodyVelocity.Velocity = moveDirection
        end)
    else
        if flyBodyVelocity then
            flyBodyVelocity:Destroy()
            flyBodyVelocity = nil
        end
        if flyConnection then
            flyConnection:Disconnect()
            flyConnection = nil
        end
        if humanoid then
            humanoid.PlatformStand = false
        end
    end
end

---------------------------------------------------------------------------
-- 속도 관련 (달리기/걷기)
---------------------------------------------------------------------------
local speedEnabled = false
local speedValue = 16
local originalWalkSpeed = 16
local speedConnection = nil

local function toggleSpeed()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end
    
    if speedEnabled then
        humanoid.WalkSpeed = speedValue
        
        if speedConnection then
            speedConnection:Disconnect()
        end
        
        speedConnection = game:GetService("RunService").RenderStepped:Connect(function()
            if speedEnabled and humanoid and humanoid.Parent then
                if humanoid.WalkSpeed ~= speedValue then
                    humanoid.WalkSpeed = speedValue
                end
            end
        end)
    else
        if speedConnection then
            speedConnection:Disconnect()
            speedConnection = nil
        end
        
        if humanoid and humanoid.Parent then
            humanoid.WalkSpeed = originalWalkSpeed
        end
    end
end

---------------------------------------------------------------------------
-- 점프 관련
---------------------------------------------------------------------------
local jumpEnabled = false
local jumpValue = 50
local originalJumpPower = 50
local jumpConnection = nil

local function toggleJump()
    local player = game.Players.LocalPlayer
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end
    
    if jumpEnabled then
        humanoid.JumpPower = jumpValue
        humanoid.JumpHeight = jumpValue / 10
        
        if jumpConnection then
            jumpConnection:Disconnect()
        end
        
        jumpConnection = game:GetService("RunService").RenderStepped:Connect(function()
            if jumpEnabled and humanoid and humanoid.Parent then
                if humanoid.JumpPower ~= jumpValue then
                    humanoid.JumpPower = jumpValue
                    humanoid.JumpHeight = jumpValue / 10
                end
            end
        end)
    else
        if jumpConnection then
            jumpConnection:Disconnect()
            jumpConnection = nil
        end
        
        if humanoid and humanoid.Parent then
            humanoid.JumpPower = originalJumpPower
            humanoid.JumpHeight = originalJumpPower / 10
        end
    end
end

---------------------------------------------------------------------------
-- UI (에임TP, 벽뚫, 플라이, 속도, 점프)
---------------------------------------------------------------------------
MainTab:CreateSection("에임TP")

local aimToggle = MainTab:CreateToggle({
    Name = "에임TP",
    CurrentValue = false,
    Flag = "AimTP",
    Callback = function(v)
        aimTPEnabled = v
        Rayfield:Notify({Title="에임TP",Content=v and "Z키 사용가능" or "비활성화",Duration=1.5})
    end
})

MainTab:CreateLabel("Z 키를 누르면 마우스 위치로 이동")

MainTab:CreateSection("벽뚫")

local noclipToggle = MainTab:CreateToggle({
    Name = "벽뚫",
    CurrentValue = false,
    Flag = "Noclip",
    Callback = function(v)
        noclipEnabled = v
        toggleNoclip()
        Rayfield:Notify({Title="벽뚫",Content=v and "벽 통과 가능" or "벽에 막힘",Duration=1.5})
    end
})

MainTab:CreateLabel("토글 켜면 벽 통과")

MainTab:CreateSection("플라이")

local flyToggle = MainTab:CreateToggle({
    Name = "플라이",
    CurrentValue = false,
    Flag = "Fly",
    Callback = function(v)
        flyEnabled = v
        toggleFly()
        Rayfield:Notify({Title="플라이",Content=v and "비행 가능" or "비행 중지",Duration=1.5})
    end
})

-- 플라이 속도 입력 (10~100000)
local flySpeedInput = MainTab:CreateInput({
    Name = "플라이 속도",
    PlaceholderText = "10 ~ 100000",
    RemoveTextAfterFocusLost = false,
    Flag = "FlySpeedInput",
    Callback = function(Text)
        local speed = tonumber(Text)
        if speed and speed >= 10 and speed <= 100000 then
            flySpeed = speed
            Rayfield:Notify({Title="플라이 속도",Content="설정됨: "..speed,Duration=1})
        else
            Rayfield:Notify({Title="오류",Content="10~100000 사이의 숫자를 입력하세요",Duration=2})
        end
    end
})

MainTab:CreateLabel("WASD 이동 | 스페이스 상승 | 컨트롤 하강")

MainTab:CreateSection("속도")

local speedToggle = MainTab:CreateToggle({
    Name = "속도 조절",
    CurrentValue = false,
    Flag = "Speed",
    Callback = function(v)
        speedEnabled = v
        toggleSpeed()
        Rayfield:Notify({Title="속도",Content=v and "활성화" or "비활성화",Duration=1.5})
    end
})

-- 속도 입력 (10~100000)
local speedInput = MainTab:CreateInput({
    Name = "속도 값",
    PlaceholderText = "10 ~ 100000",
    RemoveTextAfterFocusLost = false,
    Flag = "SpeedInput",
    Callback = function(Text)
        local val = tonumber(Text)
        if val and val >= 10 and val <= 100000 then
            speedValue = val
            if speedEnabled then
                local player = game.Players.LocalPlayer
                local character = player.Character
                if character then
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid.WalkSpeed = val
                    end
                end
            end
            Rayfield:Notify({Title="속도 설정",Content="설정됨: "..val,Duration=1})
        else
            Rayfield:Notify({Title="오류",Content="10~100000 사이의 숫자를 입력하세요",Duration=2})
        end
    end
})

MainTab:CreateSection("점프력")

local jumpToggle = MainTab:CreateToggle({
    Name = "점프력 조절",
    CurrentValue = false,
    Flag = "Jump",
    Callback = function(v)
        jumpEnabled = v
        toggleJump()
        Rayfield:Notify({Title="점프력",Content=v and "활성화" or "비활성화",Duration=1.5})
    end
})

-- 점프력 입력 (10~100000)
local jumpInput = MainTab:CreateInput({
    Name = "점프력 값",
    PlaceholderText = "10 ~ 100000",
    RemoveTextAfterFocusLost = false,
    Flag = "JumpInput",
    Callback = function(Text)
        local val = tonumber(Text)
        if val and val >= 10 and val <= 100000 then
            jumpValue = val
            if jumpEnabled then
                local player = game.Players.LocalPlayer
                local character = player.Character
                if character then
                    local humanoid = character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid.JumpPower = val
                        humanoid.JumpHeight = val / 10
                    end
                end
            end
            Rayfield:Notify({Title="점프력 설정",Content="설정됨: "..val,Duration=1})
        else
            Rayfield:Notify({Title="오류",Content="10~100000 사이의 숫자를 입력하세요",Duration=2})
        end
    end
})

---------------------------------------------------------------------------
-- 캐릭터 변경 처리
---------------------------------------------------------------------------
game.Players.LocalPlayer.CharacterAdded:Connect(function(c)
    wait(1)
    if noclipEnabled then
        wait(0.2)
        toggleNoclip()
    end
    if flyEnabled then
        wait(0.2)
        toggleFly()
    end
    if speedEnabled then
        wait(0.2)
        toggleSpeed()
    end
    if jumpEnabled then
        wait(0.2)
        toggleJump()
    end
end)

---------------------------------------------------------------------------
-- 시작 알림
---------------------------------------------------------------------------
Rayfield:Notify({Title="로드 완료",Content="yuri Hub",Duration=3})
