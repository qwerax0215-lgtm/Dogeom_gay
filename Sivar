-- Rayfield UI ë¡œë“œ
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Dong Hub ì°½ ìƒì„±
local Window = Rayfield:CreateWindow({
    Name = "ğŸ‰ Dong Hub v1.0",
    LoadingTitle = "Dong Hub ë¡œë”©ì¤‘...",
    LoadingSubtitle = "Z í…”ë ˆí¬íŠ¸ | ë²½ëš«ê¸° | ë³´í˜¸",
    ConfigurationSaving = { Enabled = false },
    KeySystem = false,
    ToggleUIKeybind = "K"
})

-- íƒ­ ìƒì„±
local MainTab = Window:CreateTab("ë©”ì¸", "home")
local ProtectTab = Window:CreateTab("ë³´í˜¸", "shield")

-------------------------------------------------------------
-- [ì „ì—­ ë³€ìˆ˜]
-------------------------------------------------------------
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local userInputService = game:GetService("UserInputService")
local runService = game:GetService("RunService")

-- ìƒíƒœ ë³€ìˆ˜
local isGrabbed = false
local isPaused = false
local grabTimer = 0
local antiGrabEnabled = false
local zTeleportEnabled = false
local noclipEnabled = false
local noclipConnection = nil

-------------------------------------------------------------
-- [ë©”ì¸ íƒ­ - Z í…”ë ˆí¬íŠ¸]
-------------------------------------------------------------
local TeleportSection = MainTab:CreateSection("ğŸŒ€ Z í…”ë ˆí¬íŠ¸")

-- ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì˜ 3D ì¢Œí‘œ ì–»ê¸°
local function getMouseTarget()
    local unitRay = mouse.UnitRay
    local origin = unitRay.Origin
    local direction = unitRay.Direction * 1000
    
    local params = RaycastParams.new()
    params.FilterType = Enum.RaycastFilterType.Blacklist
    params.FilterDescendantsInstances = {player.Character}
    
    local result = workspace:Raycast(origin, direction, params)
    
    if result then
        return result.Position + result.Normal * 3 -- ì•½ê°„ ì•ìœ¼ë¡œ
    else
        return origin + direction
    end
end

-- Zí‚¤ ì…ë ¥ ì²˜ë¦¬
userInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if not zTeleportEnabled or isPaused then return end
    if not player.Character then return end
    
    if input.KeyCode == Enum.KeyCode.Z then
        -- Zí‚¤ ëˆŒë €ì„ ë•Œ ìˆœê°„ì´ë™
        local targetPos = getMouseTarget()
        local hrp = player.Character:FindFirstChild("HumanoidRootPart")
        
        if hrp then
            hrp.CFrame = CFrame.new(targetPos)
            
            -- íš¨ê³¼ (ì„ íƒì‚¬í•­)
            local highlight = Instance.new("Highlight")
            highlight.Parent = workspace
            highlight.Adornee = player.Character
            highlight.FillColor = Color3.fromRGB(0, 255, 255)
            highlight.FillTransparency = 0.3
            highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
            
            game:GetService("Debris"):AddItem(highlight, 0.5)
        end
    end
end)

-- Z í…”ë ˆí¬íŠ¸ í† ê¸€
MainTab:CreateToggle({
    Name = "ğŸŒ€ Z í…”ë ˆí¬íŠ¸",
    CurrentValue = false,
    Callback = function(Value)
        zTeleportEnabled = Value
        
        if Value then
            Rayfield:Notify({
                Title = "âœ… Z í…”ë ˆí¬íŠ¸ ON",
                Content = "Z í‚¤ë¥¼ ëˆŒëŸ¬ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ë¡œ ìˆœê°„ì´ë™",
                Duration = 3
            })
        else
            Rayfield:Notify({
                Title = "â›” Z í…”ë ˆí¬íŠ¸ OFF",
                Content = "ê¸°ëŠ¥ ë¹„í™œì„±í™”",
                Duration = 2
            })
        end
    end
})

-- í…”ë ˆí¬íŠ¸ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
MainTab:CreateButton({
    Name = "ğŸ¯ ì¦‰ì‹œ í…”ë ˆí¬íŠ¸ (í…ŒìŠ¤íŠ¸)",
    Callback = function()
        if isPaused then
            Rayfield:Notify({
                Title = "â›” ì¼ì‹œì •ì§€ ìƒíƒœ",
                Content = "ë³´í˜¸ ê¸°ëŠ¥ í•´ì œ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤",
                Duration = 2
            })
            return
        end
        
        local targetPos = getMouseTarget()
        local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        
        if hrp then
            hrp.CFrame = CFrame.new(targetPos)
        end
    end
})

-------------------------------------------------------------
-- [ë©”ì¸ íƒ­ - ë²½ëš«ê¸° (Noclip)]
-------------------------------------------------------------
local NoclipSection = MainTab:CreateSection("ğŸ§± ë²½ëš«ê¸°"

-- ë²½ëš«ê¸° í•¨ìˆ˜
local function enableNoclip(enable)
    if enable then
        -- Noclip í™œì„±í™”
        if noclipConnection then
            noclipConnection:Disconnect()
        end
        
        noclipConnection = runService.Stepped:Connect(function()
            if not player.Character then return end
            if isPaused then return end
            
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
        
        Rayfield:Notify({
            Title = "âœ… ë²½ëš«ê¸° ON",
            Content = "ëª¨ë“  ë²½/ì˜¤ë¸Œì íŠ¸ í†µê³¼ ê°€ëŠ¥ (ë°”ë‹¥ ì œì™¸)",
            Duration = 3
        })
    else
        -- Noclip ë¹„í™œì„±í™”
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        
        -- ì›ë˜ëŒ€ë¡œ ë³µêµ¬
        if player.Character then
            for _, part in ipairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
        
        Rayfield:Notify({
            Title = "â›” ë²½ëš«ê¸° OFF",
            Content = "ê¸°ëŠ¥ ë¹„í™œì„±í™”",
            Duration = 2
        })
    end
end

-- ë²½ëš«ê¸° í† ê¸€
MainTab:CreateToggle({
    Name = "ğŸ§± ë²½ëš«ê¸° (ë°”ë‹¥ ì œì™¸)",
    CurrentValue = false,
    Callback = function(Value)
        noclipEnabled = Value
        enableNoclip(Value)
    end
})

-- ë²½ëš«ê¸° ì„¤ëª…
MainTab:CreateParagraph({
    Title = "ğŸ“Œ ë²½ëš«ê¸° ì •ë³´",
    Content = "â€¢ ë°”ë‹¥ì€ í†µê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤\nâ€¢ ëª¨ë“  ë²½/ì˜¤ë¸Œì íŠ¸ í†µê³¼ ê°€ëŠ¥\nâ€¢ ë³´í˜¸ ì¼ì‹œì •ì§€ ì¤‘ì—ëŠ” ë¹„í™œì„±í™”"
})

-------------------------------------------------------------
-- [ë³´í˜¸ íƒ­ - ì•ˆí‹°ê·¸ë© (5ì´ˆ ìë™ ì í”„)]
-------------------------------------------------------------
local AntiGrabSection = ProtectTab:CreateSection("ğŸ›¡ï¸ ì•ˆí‹°ê·¸ë©"

-- ì¡í˜ ê°ì§€ í•¨ìˆ˜
local function checkIfGrabbed()
    if not antiGrabEnabled or isPaused then return false end
    if not player.Character then return false end
    
    local character = player.Character
    
    -- Constraint(ë¡œí”„, ìŠ¤í”„ë§) ê°ì§€
    for _, constraint in ipairs(character:GetDescendants()) do
        if constraint:IsA("Constraint") then
            if constraint:IsA("RopeConstraint") or constraint:IsA("SpringConstraint") or constraint:IsA("RodConstraint") then
                local attachments = {constraint.Attachment0, constraint.Attachment1}
                
                for _, att in ipairs(attachments) do
                    if att and att.Parent then
                        local parentPart = att.Parent
                        if parentPart.Parent and parentPart.Parent:IsA("Model") then
                            local char = parentPart.Parent
                            if char:FindFirstChild("Humanoid") then
                                local otherPlayer = game.Players:GetPlayerFromCharacter(char)
                                if otherPlayer and otherPlayer ~= player then
                                    return true, constraint, otherPlayer
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    -- Weld/Joint ê°ì§€
    for _, weld in ipairs(character:GetDescendants()) do
        if weld:IsA("Weld") or weld:IsA("Snap") or weld:IsA("Motor6D") then
            if weld.Part0 and weld.Part1 then
                local part0Parent = weld.Part0.Parent
                local part1Parent = weld.Part1.Parent
                
                if part0Parent and part1Parent then
                    if (part0Parent:IsA("Model") and part0Parent:FindFirstChild("Humanoid")) or
                       (part1Parent:IsA("Model") and part1Parent:FindFirstChild("Humanoid")) then
                        
                        local player0 = part0Parent:IsA("Model") and game.Players:GetPlayerFromCharacter(part0Parent)
                        local player1 = part1Parent:IsA("Model") and game.Players:GetPlayerFromCharacter(part1Parent)
                        
                        if (player0 == player and player1 and player1 ~= player) or
                           (player1 == player and player0 and player0 ~= player) then
                            return true, weld, (player0 == player and player1 or player0)
                        end
                    end
                end
            end
        end
    end
    
    return false
end

-- ì¡í˜ í•´ì œ í•¨ìˆ˜
local function releaseFromGrab()
    if not player.Character then return end
    
    local character = player.Character
    
    -- ëª¨ë“  Constraint ì œê±°
    for _, constraint in ipairs(character:GetDescendants()) do
        if constraint:IsA("Constraint") then
            pcall(function() constraint:Destroy() end)
        end
    end
    
    -- ëª¨ë“  Weld/Joint ì œê±°
    for _, weld in ipairs(character:GetDescendants()) do
        if weld:IsA("Weld") or weld:IsA("Snap") or weld:IsA("Motor6D") then
            if weld.Part0 and weld.Part1 then
                local part0Parent = weld.Part0.Parent
                local part1Parent = weld.Part1.Parent
                
                if part0Parent and part1Parent then
                    if (part0Parent:IsA("Model") and part0Parent:FindFirstChild("Humanoid")) or
                       (part1Parent:IsA("Model") and part1Parent:FindFirstChild("Humanoid")) then
                        pcall(function() weld:Destroy() end)
                    end
                end
            end
        end
    end
end

-- 5ì´ˆ ì í”„ ì‹œìŠ¤í…œ
local function startJumpRelease()
    isGrabbed = true
    grabTimer = 5
    
    Rayfield:Notify({
        Title = "âš ï¸ ì¡í˜ ê°ì§€!",
        Content = "5ì´ˆ í›„ ìë™ ì í”„ë¡œ í•´ì œí•©ë‹ˆë‹¤",
        Duration = 3
    })
    
    -- 5ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´ ë° ì í”„
    for i = 5, 1, -1 do
        if not isGrabbed or not antiGrabEnabled then break end
        
        grabTimer = i
        
        -- ë§¤ì´ˆ ì í”„
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            local humanoid = player.Character.Humanoid
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            
            local hrp = player.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.Velocity = hrp.Velocity + Vector3.new(0, 50, 0)
            end
        end
        
        task.wait(1)
    end
    
    -- 5ì´ˆ í›„ ê°•ì œ í•´ì œ
    if isGrabbed and antiGrabEnabled then
        releaseFromGrab()
        
        Rayfield:Notify({
            Title = "âœ… ê°•ì œ í•´ì œ",
            Content = "5ì´ˆ ì í”„ë¡œ ì¡í˜ ìƒíƒœ í•´ì œë¨",
            Duration = 2
        })
        
        -- í•´ì œ í›„ ì¼ì‹œì •ì§€
        isPaused = true
        isGrabbed = false
        
        -- ë²½ëš«ê¸° ì¼ì‹œ ì¤‘ì§€
        if noclipEnabled then
            enableNoclip(false)
        end
        
        -- 5ì´ˆ í›„ ì¼ì‹œì •ì§€ í•´ì œ
        task.wait(5)
        isPaused = false
        
        -- ë²½ëš«ê¸° ë‹¤ì‹œ í™œì„±í™”
        if noclipEnabled then
            enableNoclip(true)
        end
        
        Rayfield:Notify({
            Title = "â–¶ï¸ ê¸°ëŠ¥ ì¬ê°œ",
            Content = "ëª¨ë“  ê¸°ëŠ¥ì´ ë‹¤ì‹œ í™œì„±í™”ë©ë‹ˆë‹¤",
            Duration = 2
        })
    end
end

-- ë©”ì¸ ê°ì§€ ë£¨í”„
local function startDetection()
    spawn(function()
        while antiGrabEnabled do
            task.wait(0.5)
            
            if isPaused then continue end
            
            local grabbed = checkIfGrabbed()
            
            if grabbed and not isGrabbed then
                startJumpRelease()
                
            elseif not grabbed and isGrabbed then
                isGrabbed = false
                
                Rayfield:Notify({
                    Title = "ğŸ”“ ì¡í˜ í•´ì œ",
                    Content = "5ì´ˆ ëŒ€ê¸° í›„ ê¸°ëŠ¥ ì¬ê°œ",
                    Duration = 2
                })
                
                isPaused = true
                
                -- ë²½ëš«ê¸° ì¼ì‹œ ì¤‘ì§€
                if noclipEnabled then
                    enableNoclip(false)
                end
                
                task.wait(5)
                isPaused = false
                
                -- ë²½ëš«ê¸° ë‹¤ì‹œ í™œì„±í™”
                if noclipEnabled then
                    enableNoclip(true)
                end
                
                Rayfield:Notify({
                    Title = "â–¶ï¸ ê¸°ëŠ¥ ì¬ê°œ",
                    Content = "ëª¨ë“  ê¸°ëŠ¥ì´ ë‹¤ì‹œ í™œì„±í™”ë©ë‹ˆë‹¤",
                    Duration = 2
                })
            end
        end
    end)
end

-- ì•ˆí‹°ê·¸ë© í† ê¸€ (ë³´í˜¸ íƒ­ì˜ ì²« ë²ˆì§¸ ê¸°ëŠ¥)
local antiGrabToggle = ProtectTab:CreateToggle({
    Name = "ğŸ›¡ï¸ ì•ˆí‹°ê·¸ë© (5ì´ˆ ì í”„)",
    CurrentValue = false,
    Callback = function(Value)
        antiGrabEnabled = Value
        
        if Value then
            startDetection()
            Rayfield:Notify({
                Title = "âœ… ì•ˆí‹°ê·¸ë© ON",
                Content = "ì¡í˜ ê°ì§€ ë° 5ì´ˆ ìë™ ì í”„",
                Duration = 3
            })
        else
            isGrabbed = false
            isPaused = false
            Rayfield:Notify({
                Title = "â›” ì•ˆí‹°ê·¸ë© OFF",
                Content = "ë³´í˜¸ ê¸°ëŠ¥ ë¹„í™œì„±í™”",
                Duration = 2
            })
        end
    end
})

-- ìˆ˜ë™ í•´ì œ ë²„íŠ¼
ProtectTab:CreateButton({
    Name = "ğŸ”“ ì¦‰ì‹œ í•´ì œ",
    Callback = function()
        releaseFromGrab()
        isGrabbed = false
        isPaused = true
        
        -- ë²½ëš«ê¸° ì¼ì‹œ ì¤‘ì§€
        if noclipEnabled then
            enableNoclip(false)
        end
        
        Rayfield:Notify({
            Title = "âœ… ìˆ˜ë™ í•´ì œ",
            Content = "5ì´ˆ í›„ ê¸°ëŠ¥ ì¬ê°œ",
            Duration = 2
        })
        
        task.wait(5)
        isPaused = false
        
        -- ë²½ëš«ê¸° ë‹¤ì‹œ í™œì„±í™”
        if noclipEnabled then
            enableNoclip(true)
        end
    end
})

-- ë³´í˜¸ ìƒíƒœ í‘œì‹œ
ProtectTab:CreateParagraph({
    Title = "ğŸ“Š ë³´í˜¸ ìƒíƒœ",
    Content = "â€¢ ì•ˆí‹°ê·¸ë©: 5ì´ˆ ìë™ ì í”„\nâ€¢ ì¡í˜ í•´ì œ ì‹œ 5ì´ˆ ì¼ì‹œì •ì§€\nâ€¢ ë²½ëš«ê¸°ì™€ ì—°ë™ë¨"
})

-------------------------------------------------------------
-- [ë©”ì¸ íƒ­ - ë°˜ì§ì´ ì°¾ê¸° (ì¶”ê°€ ê¸°ëŠ¥)]
-------------------------------------------------------------
local ShinySection = MainTab:CreateSection("âœ¨ ë°˜ì§ì´ ì°¾ê¸°")

-- ë°˜ì§ì´ íƒì§€ í•¨ìˆ˜
local function findShinyObjects()
    local found = {}
    
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            local shinyMaterials = {
                [Enum.Material.Neon] = true,
                [Enum.Material.DiamondPlate] = true,
                [Enum.Material.Foil] = true,
                [Enum.Material.Glass] = true,
                [Enum.Material.Glacier] = true
            }
            
            if shinyMaterials[obj.Material] or obj.Reflectance > 0.3 then
                table.insert(found, obj)
                
                local highlight = Instance.new("Highlight")
                highlight.Parent = obj
                highlight.Adornee = obj
                highlight.FillColor = Color3.fromRGB(255, 255, 0)
                highlight.FillTransparency = 0.3
                
                game:GetService("Debris"):AddItem(highlight, 3)
            end
        end
    end
    
    return found
end

MainTab:CreateButton({
    Name = "ğŸ” ë°˜ì§ì´ ìŠ¤ìº”",
    Callback = function()
        local results = findShinyObjects()
        Rayfield:Notify({
            Title = "ìŠ¤ìº” ì™„ë£Œ",
            Content = "ë°œê²¬ëœ ë°˜ì§ì´: " .. #results .. "ê°œ",
            Duration = 3
        })
    end
})

-- ì´ˆê¸° ì•Œë¦¼
Rayfield:Notify({
    Title = "ğŸ‰ Dong Hub ë¡œë“œ ì™„ë£Œ",
    Content = "Z:í…”ë ˆí¬íŠ¸ | ë²½ëš«ê¸° | ì•ˆí‹°ê·¸ë©",
    Duration = 5
})
